spring.application.name=colombus-user
spring.threads.virtual.enabled=true
server.port=${PORT:8082}

./...sh [kid] [directory]
# =========================
# Auth Service 공통
# =========================
service.auth.base-url=${AUTH_SERVICE_URL}
service.auth.issuer=${AUTH_ISSUER:http://auth-svc.internal}

# Service client assertion (서비스 → auth 인증)
service.assertion.enabled=true
service.assertion.issuer=${USER_SERVICE_URL}
service.assertion.audience=${service.auth.issuer}
service.assertion.kid=colombus-user-v1
service.assertion.alg=RS256
service.assertion.private-key-pem=${USER_PRIVATE_KEY}

# OAuth2 Resource Server / JWT
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${service.auth.base-url}/.well-known/jwks.json
security.jwt.issuer=${service.auth.issuer}
security.jwt.required-audience=${SERVICE_CLIENT_ID:user-svc}

# =========================
# Kafka
# =========================
spring.kafka.client-id=${KAFKA_USER_HOSTNAME}
kafka.consumer.group-id=${KAFKA_GROUP_ID}
spring.kafka.consumer.client-id=${KAFKA_CLIENT_ID}

# =========================
# Postgres / JPA
# =========================
spring.datasource.url=${USER_DATABASE}
spring.datasource.username=${POSTGRESQL_USERNAME}
spring.datasource.password=${POSTGRESQL_PASSWORD}
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.open-in-view=false
spring.jpa.show-sql=false

# =========================
# Flyway
# =========================
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.clean-disabled=true

# =========================
# Security Chain
# =========================
security.internal.enabled=true

spring.config.import=optional:classpath:application-otlp.properties, optional:classpath:application-kafka.properties

